<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <title>ポケモン計算</title>
        <link rel="stylesheet" href="styles.css">
    </head>

    <body>

        <h1 class="title">ポケモン計算</h1>

        <div id="pokemonList">
            <div class="pokemon" id="pokemon-1">
                <img>　
                <p></p>　
            </div>
            <div class="pokemon" id="pokemon-2">
                <img>　
                <p></p>　
            </div>
            <div class="pokemon" id="pokemon-3">
                <img>　
                <p></p>　
            </div>
            <div class="pokemon" id="pokemon-4">
                <img>
                <p></p>　
            </div>
        </div>

        <div>
            <button onclick="consultarPokemones()">
                <p>はい</p>
            </button>
        </div>
    
        <script>
    
            let lists = document.getElementById("pokemonList")

            consultarPokemones()

            function createRandomNum(){
                let min = 1
                let max = 800
                return Math.floor(Math.random() * (max + 1 - min)) + min
            }

            function consultarPokemones(){
                let pokeId1 = createRandomNum()
                let pokeId2 = createRandomNum()
                let pokeId3 = createRandomNum()
                let pokeId4 = createRandomNum()
                consultarPokemon(pokeId1, 1)
                consultarPokemon(pokeId2, 2)
                consultarPokemon(pokeId3, 3)
                consultarPokemon(pokeId4, 4)
            }
            
            function consultarPokemon(pokeId, num){
                fetch(`https://pokeapi.co/api/v2/pokemon/${pokeId}`)
                .then(function (response){
                    response.json()
                    .then(function(pokemon){
                      createPokemon(pokemon, num)
                    })
                })
            }
            
            function createPokemon(pokemon, num){
                let item = lists.querySelector(`#pokemon-${num}`)
                let images = item.getElementsByTagName("img")[0] 
                images.setAttribute("src",pokemon.sprites.front_default)
                let weight = item.getElementsByTagName("p")[0]
                weight.textContent = pokemon.weight
            }

        </script>

    </body>
</html>